# 📖 Pet Trainer 게임 데이터 추가 가이드

환영합니다! 이 문서는 Pet Trainer 프로젝트의 **배틀 시스템을 이해하고, 새로운 콘텐츠(스킬, 펫, 아이템 등)를 쉽게 추가하는 방법**을 설명합니다.  
코딩이 익숙하지 않은 초보자도 따라 할 수 있도록 최대한 친절하게 작성했습니다.

---

## 🏗️ 1. 어디를 고쳐야 하나요? (디렉토리 구조)

이 게임은 **서버(Backend)**와 **앱(Frontend)**이 나누어져 있습니다.  
무언가를 추가할 때는 보통 두 곳을 모두 수정해야 합니다.

### 📂 Backend (서버 - 실제 로직과 데이터)
`backend/app/game/` 폴더가 핵심입니다.
- **`game_assets.py`** 👈 **가장 중요!** 스킬, 펫 종족값, 상성표 등 모든 데이터가 여기에 있습니다.
- `battle_calculator.py`: 데미지를 계산하는 수학 공식이 들어있습니다. (보통 수정 X)
- `battle_manager.py`: 전투의 흐름을 관리합니다. (보통 수정 X)

### 📂 Frontend (앱 - 화면 표시)
`frontend/lib/` 폴더입니다.
- **`models/skill_data.dart`** 👈 **중요!** 앱에서 보여줄 스킬 이름과 설명이 들어있습니다.

---

## 🧠 2. 기초 개념 익히기

### 📊 캐릭터 스탯 (주요 스탯)
게임 내 모든 캐릭터는 다음 스탯들을 가집니다.
1.  **Strength (힘)**: 물리 공격력
2.  **Intelligence (지능)**: 특수 공격력 & 마법 방어력
3.  **Defense (방어)**: 물리 방어력
4.  **Agility (민첩)**: **공격 순서(스피드)**와 명중률에 영향
5.  **Luck (운)**: 크리티컬 확률
6.  **HP (체력)**: 0이 되면 패배

### 🔥 속성 (Types)
불, 물, 풀 등 상성이 존재합니다.
- **2배 데미지**: 약점을 찌름 (예: 물 -> 불)
- **0.5배 데미지**: 반감됨 (예: 불 -> 물)
- **0배 데미지 (무효)**: 아예 통하지 않음 (예: 땅 -> 비행)

---

## ⚔️ 3. 전투는 어떻게 진행되나요? (플로우)

1.  **매칭**: 두 플레이어가 만나 전투가 시작됩니다. (`BATTLE_START`)
2.  **턴 시작**:
    *   서로 어떤 행동을 할지 고릅니다. (공격, 방어 등)
    *   상대방이 고를 때까지 "생각 중..." 표시가 뜹니다.
3.  **결과 처리 (`TURN_RESULT`)**:
    *   서버가 누가 먼저 때릴지(스피드 기준), 데미지는 얼마인지 계산합니다.
    *   계산된 결과를 앱으로 보냅니다.
4.  **애니메이션**:
    *   앱은 서버가 준 대본대로 연기를 합니다. (공격 모션 -> 이펙트 -> 데미지 숫자 팝업)
5.  **반복**: 한쪽의 HP가 0이 될 때까지 위 과정을 반복합니다.

---

## 🛠️ 4. 실전! 데이터 추가하기

### ✨ 미션 1: 새로운 "스킬" 만들기
예시: **"핵꿀밤"**이라는 강력한 스킬을 만들어 봅시다.

#### 1단계 (Backend): `game_assets.py` 열기
`MOVE_DATA` 딕셔너리를 찾아 새로운 ID(예: 999)를 만듭니다.

```python
# backend/app/game/game_assets.py

MOVE_DATA = {
    # 기존 스킬들...
    
    # 여기에 추가!
    999: {
        "name": "핵꿀밤", 
        "type": "fighting",       # 속성 (fighting, fire, water, normal 등)
        "category": "physical",   # 분류 (physical: 물리, special: 특수, status: 변화)
        "power": 120,             # 위력 (높을수록 셈)
        "accuracy": 80,           # 명중률 (100은 웬만하면 맞음)
        "description": "아주 아픈 꿀밤을 때린다. 가끔 상대를 기절시킨다.", 
        
        # 부가 효과 (옵션)
        "effect": {
            "type": "status",     # 상태 이상을 거는 효과
            "status": "flinch",   # 풀죽음 (상대가 이번 턴에 행동 불가)
            "target": "enemy"     # 적에게 적용
        },
        "effect_chance": 30       # 30% 확률로 발동
    },
}
```

#### 2단계 (Frontend): `skill_data.dart` 열기
앱에서도 이 스킬의 이름과 설명을 알아야 표시해 줄 수 있습니다.

```dart
// frontend/lib/models/skill_data.dart

const Map<int, Map<String, dynamic>> SKILL_DATA = {
  // 기존 스킬들...
  
  // ID가 서버와 똑같아야 합니다!
  999: {
    "name": "핵꿀밤", 
    "power": 120, 
    "accuracy": 80, 
    "type": "fighting", 
    "description": "아주 아픈 꿀밤을 때린다." // 앱에서 보여줄 설명
  },
};
```
🎉 **끝!** 이제 게임 내에서 ID 999번 스킬을 배우거나 사용하면 "핵꿀밤"이 나갑니다.

---

### 🐶 미션 2: 새로운 "펫" 만들기
예시: **"거북이"** 펫을 추가해 봅시다.

#### 1단계 (Backend): `game_assets.py` 열기
`PET_BASE_STATS`를 찾아 종족값을 설정합니다.

```python
# backend/app/game/game_assets.py

PET_BASE_STATS = {
    # 기존 펫들...
    
    "turtle": {
        "strength": 8,       # 힘은 보통
        "intelligence": 8,   # 지능도 보통
        "defense": 15,       # 방어력이 엄청 높음! (컨셉)
        "agility": 3,        # 대신 매우 느림
        "luck": 10
    }
}
```

#### 2단계: 속성 설정하기
바로 밑에 있는 `PET_TYPE_MAP`에 속성을 지정합니다.

```python
PET_TYPE_MAP = {
    # ...
    "turtle": "water"  # 거북이는 물 속성
}
```

#### 3단계: 배우는 기술 설정하기
`PET_LEARNSET`에 레벨별로 배울 스킬 ID를 적습니다.

```python
PET_LEARNSET = {
    # ...
    "turtle": {
        1: [1, 2],       # 1레벨에 배우는 스킬 (짖기, 버티기)
        5: [211],        # 5레벨에 물대포(ID: 211) 배움
        10: [213, 253]   # 10레벨에 폭포오르기, 방어 배움
    }
}
```

---

## ❓ 자주 묻는 질문 (FAQ)

**Q. 물리(Physical)와 특수(Special)가 뭔가요?**
*   **물리**: 몸으로 때리는 기술. 내 `Strength`(힘)가 높아야 셉니다. 상대는 `Defense`(방어)로 막습니다.
*   **특수**: 마법이나 원거리 공격. 내 `Intelligence`(지능)가 높아야 셉니다.

**Q. 효과(Effect) 종류에는 뭐가 있나요?**
*   `stat_change`: 공격력, 방어력 등을 올리거나 내림 (`value`가 양수면 버프, 음수면 디버프)
*   `status`: 독, 마비, 화상 같은 상태 이상을 검
*   `heal`: 체력을 회복함
*   `field_change`: 날씨를 바꿈

**Q. 앱(`frontend`)만 고치면 안 되나요?**
*   안 됩니다! 🙅‍♂️ 실제 데미지 계산은 서버(`backend`)에서 하기 때문에, 앱만 고치면 겉으로만 바뀌고 실제 게임 적용은 안 됩니다. 꼭 둘 다 고쳐주세요.

---

이 가이드가 도움이 되었기를 바랍니다!  
더 궁금한 점은 팀원들에게 물어봐 주세요. Happy Coding! 🚀
